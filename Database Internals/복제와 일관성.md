고가용성 시스템을 설계하기 위해서는 단일 장애 지점을 제거해야 한다
시스템에 여러 개의 데이터 복제본을 저장하면 일부 시스템에 장애가 발생해도 fail over가 가능하다
즉 데이터 복제를 통해 장애 발생시 fail over 하도록 하여 고가용성 시스템을 설계할 수 있다

데이터 복제본의 일관성을 유지를 위해서는 여러 복제본을 원자적으로 업데이트하는 합의 알고리즘이 필요하다
그러나 합의 알고리즘은 매번 데이터를 수정할 때 마다 수행하기에는 비용이 높다
따라서 어느 정도 상태 차이를 허용하면서 사용자에게 최대한 일관된 데이터를 제공할 수 있는 알고리즘이 필요하다

# CAP 이론
CAP 이론은 적절한 응답 시간 이내에 Consistency (일관성), Availability (가용성), Partition Tolerance (분할 허용성) 3가지를 모두 만족시키는 분산 시스템을 구성할 수 없다는 이론이다

먼저 분산 시스템에서는 네트워크 장애가 언제든 발생할 수 있기 때문에 Partition Tolerance는 필수이다.
이때 Partition Tolerance를 지켜주기 위해 Consistency와 Availability는 trade off 관계를 가진다

### CP 
Availability 대신 Consistency를 선택한 시스템에서는 장애가 발생하는 경우 데이터 일관성을 위해 과반 노드 동의 등을 통한 데이터 수정을 막을 수 있다
장애 시간 동안 데이터 변경을 할수는 없으니 가용성은 떨어지지만 데이터의 일관성은 보호할 수 있다

### AP
Consistency 대신 Availability를 선택한 시스템에서는 장애가 발생하는 경우 가용성을 위해 데이터를 수정할 수 있도록 하고 일관성을 포기한다

### PACELC 정리
PAC는 CAP를 의미한다
ELC 장애가 아닌 나머지 상황에서 Latency vs Consistency를 의미한다

레이턴시를 우선시 한다면 일부 일관성이 떨어지더라도 빠르게 데이터 수정을 반영한다 (Primary에만 반영 성공 하면 성공)
일관성을 우선시 한다면 조금 오래 걸리더라도 확실하게 데이터 수정을 반영한다 (과반 이상 성공하면 성공)

#