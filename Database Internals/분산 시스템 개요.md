# 개요
데이터베이스를 단일 노드에서만 실행하던 시대를 지나 대부분의 최신 데이터베이스는 저장공간, 성능, 가용성을 높이기 위해서 여러 노드를 클러스터로 연결한다.

### 기본 정의
분산 시스템은 일반적으로 다음의 구성 요소가 있디
* 참가자 (프로세스 또는 노드)
* 참가자의 상태
* 참가자를 연결하는 네트워크 링크

분산 시스템에서 네트워크 링크 느리고 "**==신뢰할 수 없는 통신 수단==**"이다. 
* 네트워크는 메시지가 늦을 수 있다
* 메시지의 순서가 바뀔 수 도 있다
* 심지어는 전달되지 않을 수 도 있다

따라서, 분산 환경에서는 네트워크가 불안정하고 이로 인해 원격 프로세스가 불안정한 상황에서도(네트워크 장애 또는 프로세스 장애) 전체 시스템은 정상적으로 작동하도록 분산 알고리즘을 설계한다.

분산 알고리즘의 구성요소
* 상태 (state)
* 단계 (phase)
* 전환 (transition)

분산 알고리즘은 각각의 알고리즘의 단계를 자신의 로컬 영역에서 독립적으로 수행하기도 하고 메시지 교환을 통해 서로 상호작용하기도 한다. 
각 참가자는 역할, 교환 메시지, 상태, 전환, 단계, 타이밍 가정, 장애 모델, 등 여러가지 특성을 정의 한다.

분산 알고리즘은 용도가 다양하다
* Coordination (총괄) : 여러 노드의 행동을 총괄한다
* Dissemination (전파) : 신속, 안정적으로 정보를 전파한다.
* Consensus (합의) : 여러 프로세스 사이에 합의를 도출한다. (공유하는 리소스의 상태의 합의)

### 분산 시스템의 차이점
일반 시스템과 분산 시스템은 **==동시성==** 이라는 측면에서 다르다.
분산 시스템에서 단일 노드 시스템과 동일한 연산을 수행 하더라도 (a += 1) 실행 순서에 따라 그 결과가 달라지는 경우가 있다 (Race Condition)

분산 시스템은 일관성 모델을 통해 동시에 수행되는 작업의 수행 순서를 정의하고 참가자가 순서를 알 수 있도록 한다. 이는 동시 컴퓨팅 (멀티 쓰레드, 멀티 프로세스) 분야와 주제가 비슷하지만 가장 큰 차이는 네트워크의 사용 여부이다. 보통 동시 컴퓨팅에서는 공유 메모리를 통해 데이터를 공유하지만 분산 시스템은 공유하는 변수의 상태가 다를 수 있으며 메시지 교환을 통해 통신한다. 

# 자원의 공유
분산 시스템에서도 데이터베이스와 같은 저장소를 하나의 공유 메모리처럼 사용한다면 동시성 문제를 해결할 수 있을 까?

아니다. 
데이터베이스에 접근하기 위해서는 결국 각 프로세스가 네트워크를 통해 메시지를 주고 받아야한다. 결국 네트워크는 장애가 발생할 수 밖에 없다 뿐만 아니라 데이터베이스 자체도 문제가 발생할 수 있다. 
단일 데이터베이스의 문제가 발생하면 전체 시스템이 사용 불가능해진다. 즉, 데이터베이스가 단일 장애 지점이된다. 
그렇기 때문에 특정 컴포넌트의 장애에도 ==Fault Tolerant==한 시스템을 구성하기 위해 데이터베이스를 다중화해야한다. 이렇게 되면 다시 동시성 문제가 발생한다. 

결론은 단순히 데이터베이스를 공유 메모리 처럼 사용한다고 동시성 문제를 해결할 수 있는 것은 아니다. 결국은 분산 알고리즘인 필요하다.